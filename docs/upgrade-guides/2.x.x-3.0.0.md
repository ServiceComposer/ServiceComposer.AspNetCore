# Upgrade guide from v2.x to 3.0.0

toc

## Use Endpoints and route attributes

The following route mapping methods have been removed:

- `MapComposableRoute`
- `MapComposableGet`
- `MapComposablePost`
- `MapComposableDelete`
- `MapComposablePatch`
- `MapComposablePut`

Use attribute routing based composition, MapCompositionHandlers and MVC Endpoints as described in the [getting started](../../README.md#getting-started) section.

## Composed request ID

The `AddComposedRequestIdHeader`, `GetComposedRequestId`, and `GetComposedRequestIdHeaderOr` have been removed in favor of accessing the request identifier trhough the composition context. To get the composition context in a composition handler:

snippet: composition-context-api-get-context

The composition context exposes the `RequestID` property:

snippet: composition-context-api-get-request-id






HandleRequest is obsoleted and will be treated as an error starting v2 and remove" +
             "d in v3. Use attribute routing based composition, MapCompositionHandlers, and MV" +
             "C Endpoints."

To enable write support use the EnableWriteSupport() method on the ViewModelCompo" +
             "sitionOptions. This method will be treated as an error in v2 and removed in v3."

EventHandler<TEvent> is obsoleted and will be treated as an error starting v2 and" +
         " removed in v3. Use attribute routing based composition, and CompositionEventHan" +
         "dler<TEvent>."

IHandleRequests is obsoleted and will be treated as an error starting v2 and remo" +
         "ved in v3. Use attribute routing based composition and ICompositionRequestsHandl" +
         "er."

IHandleRequestsErrors is obsoleted and will be treated as an error starting v2 an" +
         "d removed in v3. Use attribute routing based composition and ICompositionErrorsH" +
         "andler."

IInterceptRoutes is obsoleted and will be treated as an error starting v2 and rem" +
         "oved in v3. Use attribute routing based composition."

"IPublishCompositionEvents is obsoleted and will be treated as an error starting v" +
         "2 and removed in v3. Use attribute routing based composition and ICompositionEve" +
         "ntsPublisher."

"ISubscribeToCompositionEvents is obsoleted and will be treated as an error starti" +
         "ng v2 and removed in v3. Use attribute routing based composition and ICompositio" +
         "nEventsSubscriber."

"Use Preview(HttpRequest request). Will be treated as an error starting v2 and rem" +
             "oved in v3."

"Use Preview(HttpRequest request). Will be treated as an error starting v2 and rem" +
             "oved in v3."

"RegisterCompositionEventsSubscriber is obsolete, see upgrade guide on how to use " +
             "the new composition interfaces."

"RegisterRequestsHandler is obsolete, see upgrade guide on how to use the new comp" +
             "osition interfaces."

CompositionGateway is obsoleted and will be treated as an error starting v2 and r" +
             "emoved in v3. Use attribute routing based composition, MapCompositionHandlers, a" +
             "nd MVC Endpoints."

"CompositionGateway is obsoleted and will be treated as an error starting v2 and r" +
             "emoved in v3. Use attribute routing based composition, MapCompositionHandlers, a" +
             "nd MVC Endpoints."

"HandleRequest is obsoleted and will be treated as an error starting v2 and remove" +
             "d in v3. Use attribute routing based composition, MapCompositionHandlers, and MV" +
             "C Endpoints."

"dynamic.RaiseEvent is obsolete. " +
                                            "It'll be treated as an error starting v2 and removed in v3. " +
                                            "Use HttpRequest.GetCompositionContext() to raise events."